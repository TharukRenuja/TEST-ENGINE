{% extends "base.html" %}

{% block content %}
<div class="max-w-4xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700">
    <div>
        <h1 class="text-3xl font-extrabold text-slate-800 dark:text-slate-100 tracking-tight">
            {{ 'Edit' if download_id else 'Add New' }} Download
        </h1>
        <p class="text-slate-500 dark:text-slate-400 mt-1">
            {{ 'Modify the details for your downloadable content.' if download_id else 'Provide the details for the downloadable content.' }}
        </p>
    </div>

    <div class="glass p-8 rounded-3xl border-slate-200/60 dark:border-slate-800/60 shadow-sm relative overflow-hidden">
        <form action="{{ url_for('tools.download_update', download_id=download_id) if download_id else url_for('tools.download_add') }}" method="POST" class="space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-2">
                    <label class="block text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-widest">Title</label>
                    <input type="text" name="title" value="{{ download.title or '' }}" required class="w-full px-5 py-3 bg-white/50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-700 rounded-2xl focus:ring-4 focus:ring-gold/20 outline-none transition-all dark:text-slate-100 placeholder-slate-400" placeholder="My Mobile App">
                </div>
                <div class="space-y-2">
                    <label class="block text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-widest">Date</label>
                    <input type="date" name="date" value="{{ download.date or '' }}" class="w-full px-5 py-3 bg-white/50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-700 rounded-2xl focus:ring-4 focus:ring-gold/20 outline-none transition-all dark:text-slate-100">
                </div>
            </div>

            <div class="space-y-2">
                <label class="block text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-widest">Description</label>
                <textarea name="description" rows="3" class="w-full px-5 py-3 bg-white/50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-700 rounded-2xl focus:ring-4 focus:ring-gold/20 outline-none transition-all dark:text-slate-100 placeholder-slate-400" placeholder="A brief overview of the app...">{{ download.description or '' }}</textarea>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-2">
                    <label class="block text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-widest">Type</label>
                    <select name="type" class="w-full px-5 py-3 bg-white/50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-700 rounded-2xl focus:ring-4 focus:ring-gold/20 outline-none transition-all dark:text-slate-100 appearance-none">
                        <option value="Mobile App" {% if download.type == 'Mobile App' %}selected{% endif %}>Mobile App</option>
                        <option value="Desktop Program" {% if download.type == 'Desktop Program' %}selected{% endif %}>Desktop Program</option>
                        <option value="Plugin" {% if download.type == 'Plugin' %}selected{% endif %}>Plugin</option>
                        <option value="Resource" {% if download.type == 'Resource' %}selected{% endif %}>Resource</option>
                    </select>
                </div>
                <div class="space-y-2">
                    <label class="block text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-widest">Platform</label>
                    <select name="platform" class="w-full px-5 py-3 bg-white/50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-700 rounded-2xl focus:ring-4 focus:ring-gold/20 outline-none transition-all dark:text-slate-100 appearance-none">
                        <option value="iOS" {% if download.platform == 'iOS' %}selected{% endif %}>iOS</option>
                        <option value="Android" {% if download.platform == 'Android' %}selected{% endif %}>Android</option>
                        <option value="Windows" {% if download.platform == 'Windows' %}selected{% endif %}>Windows</option>
                        <option value="MacOS" {% if download.platform == 'MacOS' %}selected{% endif %}>MacOS</option>
                        <option value="Cross-platform" {% if download.platform == 'Cross-platform' %}selected{% endif %}>Cross-platform</option>
                    </select>
                </div>
            </div>

            <div class="space-y-2">
                <label class="block text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-widest">Download Link</label>
                <input type="url" name="link" value="{{ download.link or '' }}" required class="w-full px-5 py-3 bg-white/50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-700 rounded-2xl focus:ring-4 focus:ring-gold/20 outline-none transition-all dark:text-slate-100 placeholder-slate-400" placeholder="https://appstore.com/my-app">
            </div>

            <div class="pt-4 flex justify-end space-x-4">
                <a href="{{ url_for('tools.downloads_list') }}" class="px-8 py-3 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 rounded-2xl font-bold hover:bg-slate-200 dark:hover:bg-slate-700 transition-all">Cancel</a>
                <button type="submit" class="px-8 py-3 bg-gold text-slate-900 rounded-2xl font-black hover:bg-amber-400 transition-all shadow-xl shadow-gold/20">
                    {{ 'Update Link' if download_id else 'Create Link' }}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
